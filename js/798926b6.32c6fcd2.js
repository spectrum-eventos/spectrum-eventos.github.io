(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["798926b6"],{"4e5b":function(e,t,n){"use strict";var r=n("e1d2"),a=n.n(r);a.a},bf5a:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{attrs:{id:"presence-presence"}},[n("q-table",{staticClass:"table",attrs:{"row-key":"id","rows-per-page-label":"Itens por página","no-data-label":"Nenhum presença foi criado ainda",title:"Presenças - Total "+e.pageConfig.rowsNumber,loading:e.loading,data:e.presences,columns:e.columns,"rows-per-page-options":[25],pagination:e.pageConfig},on:{"update:pagination":function(t){e.pageConfig=t},request:e.fetchPresences},scopedSlots:e._u([{key:"body-cell-actions",fn:function(t){return n("q-td",{attrs:{props:t}},[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"delete",size:"2rem"},nativeOn:{click:function(n){e.showConfirmModal(t.row)}}})],1)}},{key:"pagination",fn:function(t){return n("div",{staticClass:"row flex-center q-py-sm"},[n("q-btn",{staticClass:"q-mr-sm",attrs:{round:"",dense:"",size:"sm",icon:"keyboard_arrow_left",color:"secondary",disable:t.isFirstPage},on:{click:t.prevPage}}),n("div",{staticClass:"q-mr-sm",staticStyle:{"font-size":"small"}},[e._v("Página "+e._s(t.pagination.page)+" / "+e._s(t.pagination.totalPages))]),n("q-btn",{attrs:{round:"",dense:"",size:"sm",icon:"keyboard_arrow_right",color:"secondary",disable:t.isLastPage},on:{click:t.nextPage}})],1)}}])})],1)},a=[];r._withStripped=!0;n("7f7f");var s=n("3156"),i=n.n(s),o=(n("96cf"),n("c973")),c=n.n(o),u=n("2f62"),l=n("c1df"),p=n.n(l),g={name:"presence-presence",components:{},beforeRouteEnter:function(){var e=c()(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:try{r()}catch(e){this.$log.error(e)}case 1:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),props:{},data:function(){return{loading:!1,pageConfig:{rowsNumber:0,page:1,totalPages:null},columns:[{name:"name",label:"Nome",field:"name",align:"left"},{name:"date",label:"Data",field:function(e){return p()(e.date).format("LLLL")}},{name:"actions",label:"Ações"}]}},computed:i()({},Object(u["c"])("presence",["presences"])),methods:i()({},Object(u["b"])("presence",["getAllPresences","deletePresence"]),{getParams:function(e){var t=e.page;return{page:t,"search[list_id_eq]":this.$route.params.id,"search[s]":"name"}},fetchPresences:function(){var e=c()(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.pagination,this.loading=!0,r=this.getParams(n),e.next=5,this.getAllPresences(r);case 5:a=e.sent,this.pageConfig.rowsNumber=a.count,this.pageConfig.page=a.current_page,this.pageConfig.totalPages=a.total_pages,this.loading=!1;case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),showConfirmModal:function(){var e=c()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$q.dialog({title:"Confirmar exclusão",message:"Você tem certeza que deseja excluir a presença do(a) ".concat(t.name,"?\n                    Esta ação não pode ser desfeita."),ok:"Tenho certeza",cancel:"Não excluir"});case 3:this.exclude(t.id),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.$log.error(e.t0);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),exclude:function(){var e=c()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.deletePresence(t);case 3:this.$q.notify({type:"positive",message:"Presença excluído com sucesso"}),this.fetchPresences({pagination:this.pageConfig}),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$log.error(e.t0),this.$q.notify("Ocorreu um erro, por favor, tente novamente.");case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()}),mounted:function(){this.fetchPresences({pagination:this.pageConfig})}},f=g,d=(n("4e5b"),n("2877")),m=Object(d["a"])(f,r,a,!1,null,"9a7463b6",null);m.options.__file="list.vue";t["default"]=m.exports},e1d2:function(e,t,n){}}]);