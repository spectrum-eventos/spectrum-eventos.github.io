(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["6fb33c0c"],{"16e2":function(e,t,n){"use strict";var i=n("a668"),r=n.n(i);r.a},"94e7":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{attrs:{id:"admin-list"}},[n("q-table",{staticClass:"table",attrs:{title:"Administradores",loading:e.loading,data:e.admins,columns:e.columns,"rows-per-page-options":[25],pagination:e.pageConfig,"row-key":"id","rows-per-page-label":"Itens por página"},on:{"update:pagination":function(t){e.pageConfig=t},request:e.fetchAdmins},scopedSlots:e._u([{key:"top-right",fn:function(t){return[n("q-btn",{attrs:{label:"Adicionar",color:"primary"},nativeOn:{click:function(t){e.$router.push("admin/create")}}})]}},{key:"body-cell-actions",fn:function(t){return n("q-td",{attrs:{props:t}},[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"remove red eye",size:"2rem"},nativeOn:{click:function(n){e.$router.push("admin/show/"+t.row.id)}}}),n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"edit",size:"2rem"},nativeOn:{click:function(n){e.$router.push("admin/edit/"+t.row.id)}}}),n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"delete",size:"2rem"},nativeOn:{click:function(n){e.confirmAndExclude(t.row)}}})],1)}},{key:"pagination",fn:function(t){return n("div",{staticClass:"row flex-center q-py-sm"},[n("q-btn",{staticClass:"q-mr-sm",attrs:{round:"",dense:"",size:"sm",icon:"keyboard_arrow_left",color:"secondary",disable:t.isFirstPage},on:{click:t.prevPage}}),n("div",{staticClass:"q-mr-sm",staticStyle:{"font-size":"small"}},[e._v("Página "+e._s(t.pagination.page)+" / "+e._s(t.pagination.totalPages))]),n("q-btn",{attrs:{round:"",dense:"",size:"sm",icon:"keyboard_arrow_right",color:"secondary",disable:t.isLastPage},on:{click:t.nextPage}})],1)}}])})],1)},r=[];i._withStripped=!0;n("7f7f");var a=n("3156"),o=n.n(a),s=(n("96cf"),n("c973")),c=n.n(s),u=n("2f62"),l={name:"admin-list",components:{},beforeRouteEnter:function(){var e=c()(regeneratorRuntime.mark(function e(t,n,i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:try{i()}catch(e){this.$log.error(e)}case 1:case"end":return e.stop()}},e,this)}));return function(t,n,i){return e.apply(this,arguments)}}(),props:{},data:function(){return{loading:!1,pageConfig:{rowsNumber:25,page:1,totalPages:null},columns:[{name:"name",label:"Nome",field:"name",align:"left"},{name:"email",label:"E-mail",field:"email",align:"left"},{name:"actions",label:"Ações"}]}},computed:o()({},Object(u["c"])(["admins"])),methods:o()({},Object(u["b"])(["getAllAdmins","deleteAdmin"]),{fetchAdmins:function(){var e=c()(regeneratorRuntime.mark(function e(t){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.pagination,this.loading=!0,e.next=4,this.getAllAdmins(n.page);case 4:i=e.sent,this.pageConfig.rowsNumber=i.current_count,this.pageConfig.page=i.current_page,this.pageConfig.totalPages=i.total_pages,this.loading=!1;case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),confirmAndExclude:function(e){e.id===this.$auth.user().id?this.$q.notify("Você não pode se excluir"):this.showConfirmModal(e)},showConfirmModal:function(){var e=c()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$q.dialog({title:"Confirmar exclusão",message:"Você tem certeza que deseja excluir o administrador ".concat(t.name,"?\n                    Esta ação não pode ser desfeita."),ok:"Tenho certeza",cancel:"Não excluir"});case 3:this.exclude(t.id),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.$log.error(e.t0);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),exclude:function(){var e=c()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.deleteAdmin(t);case 3:this.$q.notify({type:"positive",message:"Administrador excluído com sucesso"}),this.getAllAdmins(),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$log.error(e.t0),this.$q.notify("Ocorreu um erro, por favor, tente novamente.");case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()}),mounted:function(){this.fetchAdmins({pagination:this.pageConfig.page})}},d=l,p=(n("16e2"),n("2877")),m=Object(p["a"])(d,i,r,!1,null,"98b9c560",null);m.options.__file="list.vue";t["default"]=m.exports},a668:function(e,t,n){}}]);