(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["1d27c3c0"],{"01b0":function(e,t,a){"use strict";var n=a("dba1"),r=a.n(n);r.a},7325:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{attrs:{id:"list-list"}},[a("q-table",{staticClass:"table",attrs:{"row-key":"id","rows-per-page-label":"Itens por página","no-data-label":"Nenhum chamada foi criado ainda",title:"Chamadas - Total "+e.pageConfig.rowsNumber,loading:e.loading,data:e.lists,columns:e.columns,"rows-per-page-options":[25],pagination:e.pageConfig},on:{"update:pagination":function(t){e.pageConfig=t},request:e.fetchLists},scopedSlots:e._u([{key:"top-right",fn:function(t){return[a("q-btn",{attrs:{label:"Adicionar",color:"primary"},nativeOn:{click:function(t){return e.addList(t)}}})]}},{key:"body-cell-actions",fn:function(t){return a("q-td",{attrs:{props:t}},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"remove red eye",size:"2rem"},nativeOn:{click:function(a){e.$router.push("/list/"+t.row.id+"/presence")}}}),a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"edit",size:"2rem"},nativeOn:{click:function(a){e.editList(t.row)}}}),a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"delete",size:"2rem"},nativeOn:{click:function(a){e.showConfirmModal(t.row)}}})],1)}},{key:"pagination",fn:function(t){return a("div",{staticClass:"row flex-center q-py-sm"},[a("q-btn",{staticClass:"q-mr-sm",attrs:{round:"",dense:"",size:"sm",icon:"keyboard_arrow_left",color:"secondary",disable:t.isFirstPage},on:{click:t.prevPage}}),a("div",{staticClass:"q-mr-sm",staticStyle:{"font-size":"small"}},[e._v("Página "+e._s(t.pagination.page)+" / "+e._s(t.pagination.totalPages))]),a("q-btn",{attrs:{round:"",dense:"",size:"sm",icon:"keyboard_arrow_right",color:"secondary",disable:t.isLastPage},on:{click:t.nextPage}})],1)}}])})],1)},r=[];n._withStripped=!0;a("7f7f");var i=a("3156"),s=a.n(i),o=(a("96cf"),a("c973")),c=a.n(o),u=a("2f62"),p={name:"list-list",components:{},beforeRouteEnter:function(){var e=c()(regeneratorRuntime.mark(function e(t,a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:try{n()}catch(e){this.$log.error(e)}case 1:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}(),props:{},data:function(){return{loading:!1,pageConfig:{rowsNumber:0,page:1,totalPages:null},columns:[{name:"name",label:"Nome",field:"name",align:"left"},{name:"actions",label:"Ações"}]}},computed:s()({},Object(u["c"])("list",["lists"])),methods:s()({},Object(u["b"])("list",["getAllLists","createList","updateList","deleteList"]),{getParams:function(e){var t=e.page;return{page:t,"search[event_id_eq]":this.$route.params.id,"search[s]":"name"}},fetchLists:function(){var e=c()(regeneratorRuntime.mark(function e(t){var a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.pagination,this.loading=!0,n=this.getParams(a),e.next=5,this.getAllLists(n);case 5:r=e.sent,this.pageConfig.rowsNumber=r.count,this.pageConfig.page=r.current_page,this.pageConfig.totalPages=r.total_pages,this.loading=!1;case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),addList:function(){var e=c()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$q.dialog({title:"Criar chamada",message:"Dê um nome ao chamada",prompt:{type:"text"},ok:"Criar",cancel:"Cancelar"});case 3:t=e.sent,this.create(t),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$log.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),create:function(){var e=c()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createList({name:t,event_id:this.$route.params.id});case 3:this.$q.notify({type:"positive",message:"Chamada criado com sucesso",timeout:1500}),this.fetchLists({pagination:this.pageConfig}),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$log.error(e.t0),this.$q.notify({type:"negative",message:"Ocorreu um erro ao criar o chamada, por favor, tente novamente",timeout:1500});case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),editList:function(){var e=c()(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$q.dialog({title:"Editar chamada",message:"Renomeie o chamada",prompt:{type:"text",model:t.name},ok:"Atualizar",cancel:"Cancelar"});case 3:a=e.sent,this.edit(t.id,a),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$log.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),edit:function(){var e=c()(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a){e.next=4;break}return this.$q.notify({type:"negative",message:"O nome do chamada não pode ser vazio",timeout:1500}),e.abrupt("return");case 4:return e.next=6,this.updateList({id:t,list:{name:a}});case 6:this.$q.notify({type:"positive",message:"Chamada atualizado com sucesso",timeout:1500}),this.fetchLists({pagination:this.pageConfig}),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),this.$log.error(e.t0),this.$q.notify({type:"negative",message:"Ocorreu um erro ao criar o chamada, por favor, tente novamente",timeout:1500});case 14:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t,a){return e.apply(this,arguments)}}(),showConfirmModal:function(){var e=c()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$q.dialog({title:"Confirmar exclusão",message:"Você tem certeza que deseja excluir o chamada ".concat(t.name,"?\n                    Esta ação não pode ser desfeita."),ok:"Tenho certeza",cancel:"Não excluir"});case 3:this.exclude(t.id),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.$log.error(e.t0);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),exclude:function(){var e=c()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.deleteList(t);case 3:this.$q.notify({type:"positive",message:"Chamada excluído com sucesso"}),this.fetchLists({pagination:this.pageConfig}),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$log.error(e.t0),this.$q.notify("Ocorreu um erro, por favor, tente novamente.");case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()}),mounted:function(){this.fetchLists({pagination:this.pageConfig})}},l=p,m=(a("01b0"),a("2877")),h=Object(m["a"])(l,n,r,!1,null,"9c477c1c",null);h.options.__file="list.vue";t["default"]=h.exports},dba1:function(e,t,a){}}]);